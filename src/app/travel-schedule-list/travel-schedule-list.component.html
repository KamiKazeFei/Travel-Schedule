<!-- È°ØÁ§∫ÊâÄÊúâË°åÁ®ãË®àÁï´ -->
<ng-container *ngIf="!isEditMode">
    <!-- Ë≥áÊñôÂàóË°® -->
    <div class="grid scheduleListGrid">
        <div class="col-12 center scheduleListTitle">
            {{'ÊàëÁöÑË°åÁ®ãÂàóË°®'}}
        </div>
        <div class="col-12">
            <!-- Ë°åÁ®ãÂàóË°® -->
            <div class="grid scheduleList">
                <!--  -->
                <div class="col-12 xl:col-4 lg:col-6 scheduleCol" *ngFor="let data of travelScheduleList">
                    <div class="scheduleCard">
                        <div class="grid">
                            <!-- Ë°åÁ®ãÊ®ôÈ°å -->
                            <div class="col-10 scheduleCardTitle">
                                <!-- Ë°åÁ®ãÊ®ôÈ°å -->
                                <label style="color: antiquewhite;">{{data.title}}</label>
                                <br>
                                <!-- Ë°åÁ®ãÊó•Êúü -->
                                <label style="color: lightseagreen;">
                                    {{
                                    (data.start_date | date:'yyyy/MM/dd (EE)') + '~' +
                                    (data.end_date | date:'yyyy/MM/dd (EE)')
                                    }}
                                </label>
                            </div>
                            <!-- Á∑®ËºØË°åÁ®ãÊåâÈàï -->
                            <div class="col-2">
                                <button pButton type="button" class="scheduleSettingBtn" icon="pi pi-list"
                                    (click)="setEditScheduleDialog(true,data)">
                                </button>
                            </div>
                            <!-- Ë°åÁ®ãÊïòËø∞ -->
                            <div class="col-12" style="border-top: 1px solid white;">
                                <div class="scheduleDescription">
                                    {{data.description}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- È†ÅÂ∞æ -->
    <div class="footer">
        <label style="color: white;font-size: 21px;margin-right: 15px;">Êñ∞Â¢ûË°åÁ®ã</label>
        <!-- Êñ∞Â¢ûË°åÁ®ã -->
        <button pButton type="button" icon="pi pi-plus" class="roundBtn" (click)="create()">
        </button>
    </div>
</ng-container>

<!-- Á∑®ËºØË°åÁ®ã -->
<ng-container *ngIf="isEditMode">
    <!-- Ë°åÁ®ãË≥áË®ä -->
    <div class="grid editPageGrid">
        <!-- Ê®ôÈ°å -->
        <div class="col-12 title">
            {{schedule.title}}
        </div>
        <!-- Ë°åÁ®ãÊïòËø∞ -->
        <div class="col-12 description">
            {{schedule.description}}
        </div>
        <!-- Êó•ÊúüÈÅ∏È†Ö -->
        <div class="col-12 grayBottom">
            <div class="grid zeroPadding">
                <!-- Ë™øÊï¥Êó•Êúü -->
                <div class="col-2 xl:col-1 lg:col-1 md:col-1 center dateSettingBtnCol">
                    <button pButton type="button" icon="pi pi-cog" class="roundBtn" (click)="openEditBasicInfo()"
                        style="width: 40px;height: 40px;">
                    </button>
                    <br>
                    <label style="margin: auto;color: white;">Ë™øÊï¥Ë°åÁ®ã</label>
                </div>
                <!-- Êñ∞Â¢û -->
                <div class="col-2 xl:col-1 lg:col-1 md:col-1 center dateSettingBtnCol">
                    <button pButton type="button" *ngIf="isEditMode" icon="pi pi-plus" class="roundBtn"
                        (click)="createDayIntroduce()">
                    </button>
                    <br>
                    <label style="margin: auto;color: white;">Êñ∞Â¢ûË°åÁ®ã</label>
                </div>
                <!-- Êó•ÊúüÂàó -->
                <div class="col-8 xl:col-10 lg:col-10 md:col-10">
                    <!-- Ê®ôÈ°åÊîî -->
                    <div class="dateOptionBar">
                        <div class="dateOptionBarDiv">
                            <ul>
                                <li [class]="schedule.selected_introduce.pk_id === data.pk_id ? 'selectedDateOption' : 'dateOption'"
                                    (click)="schedule.selected_introduce = data"
                                    *ngFor="let data of schedule.day_introduces;let i = index">
                                    <label>{{data.date | date: 'MM/dd'}}</label>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Ë°åÁ®ãÂàóË°® -->
        <div class="col-12 grayBottom editPage">
            <div class="grid dayPerScheduleList" cdkDropList (cdkDropListDropped)="changeScheduleOrder($event)">
                <div class="col-12 dragBlock" cdkDrag
                    *ngFor="let data of schedule.selected_introduce.schedule_list;let i = index">
                    <div class="scheduleBlock">
                        <div class="grid zeroPadding">
                            <!-- ÁßªÂãï -->
                            <div class="col-1 center" style="display: flex;align-items: center;user-select: none;">
                                <i class="pi pi-list" cdkDragHandle style="font-size: 25px;float: left;"></i>
                                <label style="margin-left: 25px;font-size: 25px;">{{data.ser_no + '. '}}</label>
                                <ng-container *ngIf="data.type === 'move';else stay">
                                    <label style="font-size: 50px;">üöù</label>
                                </ng-container>
                                <ng-template #stay>
                                    <label style="font-size: 50px;">üñºÔ∏è</label>
                                </ng-template>
                            </div>
                            <!-- È°ûÂûã -->
                            <div class="col-1">
                                <label>{{'Ë°åÁ®ãÈ°ûÂûãÔºö'}}</label>
                                <br>
                                <p-radioButton [(ngModel)]="data.type" [label]="'ÂÅúÁïô'" [value]="'stay'"></p-radioButton>
                                <p-radioButton [(ngModel)]="data.type" [label]="'ÁßªÂãï'" [value]="'move'"></p-radioButton>
                            </div>
                            <!-- ÂÅúÁïôÊôÇÈñì -->
                            <div class="col-2">
                                <label>{{(data.type === 'move' ? 'ÁßªÂãï' : 'ÂÅúÁïô') + 'ÊôÇÈñìÔºö'}}</label>
                                <input pInputText type="text" [(ngModel)]="data.time" style="background: transparent;">
                            </div>
                            <!-- Âú∞ÈªûÂêçÁ®± -->
                            <div class="col-4">
                                <label>{{'Ë°åÁ®ãÊïòËø∞Ôºö'}}</label>
                                <input pInputText type="text" [(ngModel)]="data.description"
                                    style="background: transparent;">
                            </div>
                            <!-- GoogleÂú∞ÂúñÁ∂≤ÂùÄ -->
                            <div class="col-3">
                                <label>{{'Âú∞ÈªûÁ∂≤ÂùÄÔºö'}}</label>
                                <input pInputText type="text" [(ngModel)]="data.map_location"
                                    style="background: transparent;">
                            </div>
                            <!-- ÁßªÈô§ -->
                            <div class="col-1 center"
                                style="display: flex;justify-content: center;align-items: center;">
                                <button pButton type="button" class="deleteBtn" [icon]="'pi pi-trash'"
                                    (click)="deleteDaysSchedule(i)">
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Â≠êÈ†ÖÁõÆ -->
        <div class="col-12 grayBottom subDataGrid" style="color: white;">
            <div class="grid zeroPadding">
                <!-- È§êÈ£ü„ÄÅ‰ΩèÂÆø -->
                <div class="col-5">
                    <div class="grid zeroPadding">
                        <div class="col-7">
                            <label>‰ΩèÂÆø</label>
                            <input pInputText type="text" [(ngModel)]="schedule.selected_introduce.hotel_name" />
                        </div>
                        <div class="col-5">
                            <label>Á∂≤ÂùÄ</label>
                            <input pInputText type="text"
                                [(ngModel)]="schedule.selected_introduce.hotel_map_location" />
                        </div>
                    </div>
                    <div class="grid zeroPadding">
                        <div class="col-7">
                            <label>Êó©È§ê</label>
                            <input pInputText type="text" [(ngModel)]="schedule.selected_introduce.breakfirst" />
                        </div>
                        <div class="col-5">
                            <label>Á∂≤ÂùÄ</label>
                            <input pInputText type="text"
                                [(ngModel)]="schedule.selected_introduce.breakfirst_map_location" />
                        </div>
                    </div>
                    <div class="grid zeroPadding">
                        <div class="col-7">
                            <label>ÂçàÈ§ê</label>
                            <input pInputText type="text" [(ngModel)]="schedule.selected_introduce.launch" />
                        </div>
                        <div class="col-5">
                            <label>Á∂≤ÂùÄ</label>
                            <input pInputText type="text"
                                [(ngModel)]="schedule.selected_introduce.launch_map_location" />
                        </div>
                    </div>
                    <div class="grid zeroPadding">
                        <div class="col-7">
                            <label>ÊôöÈ§ê</label>
                            <input pInputText type="text" [(ngModel)]="schedule.selected_introduce.dinner" />
                        </div>
                        <div class="col-5">
                            <label>Á∂≤ÂùÄ</label>
                            <input pInputText type="text"
                                [(ngModel)]="schedule.selected_introduce.dinner_map_location" />
                        </div>
                    </div>
                </div>
                <!-- Ë≥ºÁâ©Ê∏ÖÂñÆ -->
                <div class="col-4">
                    <label>{{'Ë≥ºÁâ©È†ÖÁõÆ'}}</label>
                    <p-editor [(ngModel)]="schedule.selected_introduce.shopping_list"
                        [style]="{ height: '250px',width:'100%' }">
                        <p-header>
                        </p-header>
                    </p-editor>
                </div>
                <!-- ÂÇôË®ª -->
                <div class="col-3">
                    <label>{{'ÂÇôË®ª'}}</label>
                    <p-editor [(ngModel)]="schedule.selected_introduce.memo" [style]="{ height: '250px',width:'100%' }">
                        <p-header>
                        </p-header>
                    </p-editor>
                </div>
            </div>
        </div>
    </div>
    <!-- È†ÅÂ∞æ -->
    <div class="footer">
        <!-- Á∑®ËºØÊ®°Âºè -->
        <ng-container *ngIf="isEditMode">
            <!-- Êñ∞Â¢û -->
            <button pButton type="button" icon="pi pi-plus" class="roundBtn" (click)="createDayIntroduce()">
            </button>
            <!-- ÂÑ≤Â≠ò -->
            <button pButton type="button" icon="pi pi-save" class="roundBtn" (click)="confirmSave()"
                [disabled]="disabelBtn('save')">
            </button>
            <!-- ÂèñÊ∂à -->
            <button pButton type="button" icon="pi pi-times" class="roundBtn" (click)="confirmCancel()">
            </button>
        </ng-container>
    </div>
</ng-container>

<!-- Âü∫Êú¨Ë≥áË®äÁ∑®ËºØ -->
<ng-container *ngIf="basicInfoSettingDialog">
    <p-dialog [(visible)]="basicInfoSettingDialog" [modal]="true" [style]="{width:'600px','font-size':'16px'}"
        [header]="'Ë´ãËº∏ÂÖ•Êñ∞Âª∫Ë°åÁ®ãË≥áË®ä'" [closable]="false" [blockScroll]="true">
        <div class="grid">
            <div class="col-12">
                <label>Ë°åÁ®ãÊ®ôÈ°å<span style="color: red;">*</span></label>
                <input pInputText type="text" [(ngModel)]="selectedSchedule.title">
            </div>
            <div class="col-12">
                <label>Ë°åÁ®ãÊïòËø∞<span style="color: red;">*</span></label><br>
                <textarea pInputTextArea [(ngModel)]="selectedSchedule.description" style="height: 150px;">
                </textarea>
            </div>
            <div class="col-12">
                <label>Ëµ∑ÂßãÊó•Êúü<span style="color: red;">*</span></label>
                <p-calendar [(ngModel)]="selectedSchedule.start_date" [minDate]="now" [yearNavigator]="true"
                    [monthNavigator]="true" (ngModelChange)="changeTravelDate('date')" [dateFormat]="'yy/mm/dd'"
                    [appendTo]="'body'">
                </p-calendar>
            </div>
            <div class="col-12">
                <label>Ë°åÁ®ãÂ§©Êï∏<span style="color: red;">*</span></label>
                <input pInputText type="number" [(ngModel)]="selectedSchedule.pass_day" [min]="0" [step]="1"
                    (ngModelChange)="changeTravelDate('day')" />
            </div>
            <div class="col-12">
                <label>ÁµêÊùüÊó•Êúü<span style="color: red;">*</span></label>
                <p-calendar [(ngModel)]="selectedSchedule.end_date" [minDate]="now" [yearNavigator]="true"
                    [monthNavigator]="true" (ngModelChange)="changeTravelDate('date')" [appendTo]="'body'"
                    [dateFormat]="'yy/mm/dd'">
                </p-calendar>
            </div>
            <div class="col-12">
                <label>È†êË®àËä±Ë≤ª</label><br>
                <p-inputNumber [(ngModel)]="selectedSchedule.preparation_cost"
                    [ngStyle]="{width:'100%'}"></p-inputNumber>
            </div>
        </div>
        <p-footer>
            <!-- Á¢∫Ë™ç -->
            <button pButton type="button" icon="pi pi-check" [disabled]="disabelBtn('schedule_init')" [label]="'Á¢∫Ë™ç'"
                (click)="creatingStep === 1 ? gotoNextStep() : confirmSave('basicInfo')">
            </button>
            <!-- ÂèñÊ∂à -->
            <button pButton type="button" icon="pi pi-times"
                (click)="confirmCancel(creatingStep === 1 ? null : 'basicInfo')" [label]="'ÂèñÊ∂à'">
            </button>
        </p-footer>
    </p-dialog>
</ng-container>